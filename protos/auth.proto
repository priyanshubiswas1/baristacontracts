syntax = "proto3";
package auth;

option go_package = "/auth";

message User {
    string name = 1;
    string email = 2;
    string phone = 3;
    string address = 4;
}

message GetRequest{
    string id = 1;
}

message GetResponse{
    User user = 1;
}

message RegisterRequest{
    User user = 1;
    string password = 2;
}

message RegisterResponse{
    string token = 1;
    User user = 2;
}

message RegisterUserWithShopMenuResponse{
    string token = 1;
    User user = 2;
    string shopId = 3;
    string menuId = 4;
}

message LoginRequest{
    oneof identifier {
        string email = 1;
        string phonenumber = 2;
    }
    string password = 3;
}

message LoginResponse{
    string token = 1;
    User user = 2;
    string shopId = 3;
    string menuId = 4;
}

message UpdateRequest{
    string id = 1;
    User user = 2;
    string password = 3;
    string oldpassword = 4;
}

message UpdateResponse{
    string token = 1;
    User user = 2;
}

message DeleteRequest{
    string id = 1;
    string password = 2;
}

message DeleteResponse{
    bool success = 1;
}

service AuthService{
    rpc GetUser(GetRequest) returns (GetResponse);
    rpc RegisterUser(RegisterRequest) returns (RegisterResponse);
    rpc RegisterUserWithShopMenu(RegisterRequest) returns (RegisterUserWithShopMenuResponse);
    rpc LoginUser(LoginRequest) returns (LoginResponse);
    rpc UpdateUser(UpdateRequest) returns (UpdateResponse);
    rpc DeleteUser(DeleteRequest) returns (DeleteResponse);
}