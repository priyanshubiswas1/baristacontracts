syntax = "proto3";
package session;

option go_package = "/session";

message Session {
    string sessionId = 1;
    string shopId = 2;
    string tableId = 3;
    string otp = 5;
    string sessionStatus = 6;
    float totalAmount = 7;
    bool isPaid = 8;
    string paymentMethod = 9;
    string phoneNumber = 10;
    bool active = 11;
}

message ActiveSession {
    string sessionId = 1;
    string shopId = 2;
    string tableId = 3;
    string tableName = 4;
    string otp = 5;
    string sessionStatus = 6;
    float totalAmount = 7;
    bool isPaid = 8;
    string paymentMethod = 9;
    string phoneNumber = 10;
    bool active = 11;
}

message GetAllSessionsRequest{
    string shopId = 1;
}

message GetAllSessionsResponse{
    repeated Session sessions = 1;
}

message GetAllActiveSessionsResponse{
    repeated ActiveSession sessions = 1;
}

message GetActiveSessionRequest{
    string shopId = 1;
    string tableId = 2;
}

message GetActiveSessionResponse{
    Session session = 1;
}

message GetSessionRequest{
    string sessionId = 1;
}

message GetSessionResponse{
    Session session = 1;
}

message SendSessionOTPRequest{
    string shopId = 1;
    string tableId = 2;
    string phoneNo = 3;
}

message SendSessionOTPResponse{
    bool success = 1;
}

message CreateSessionRequest{
    string shopId = 1;
    string tableId = 2;
    string otp = 3;
    string sessionStatus = 4;
    float totalAmount = 5;
    bool isPaid = 6;
    string paymentMethod = 7;
    bool active = 8;
}

message CreateSessionResponse{
    Session session = 1;
    string token = 2;
}

message JoinSessionRequest{
    string shopId = 1;
    string tableId = 2;
    string otp = 3;
}

message JoinSessionResponse{
    Session session = 1;
    string token = 2;
}

message UpdateSessionRequest{
    Session session = 1;
}

message UpdateSessionResponse{
    bool success = 1;
}

service SessionService{
    rpc GetAllSessions(GetAllSessionsRequest) returns (GetAllSessionsResponse);
    rpc GetActiveSession(GetActiveSessionRequest) returns (GetActiveSessionResponse);
    rpc GetAllActiveSessions(GetAllSessionsRequest) returns (GetAllActiveSessionsResponse);
    rpc GetSessionById(GetSessionRequest) returns (GetSessionResponse);
    rpc SendSessionOTP(SendSessionOTPRequest) returns (SendSessionOTPResponse);
    rpc CreateSession(CreateSessionRequest) returns (CreateSessionResponse);
    rpc JoinSession(JoinSessionRequest) returns (JoinSessionResponse);
    rpc UpdateSession(UpdateSessionRequest) returns (UpdateSessionResponse);
}